<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@200;400;600&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/72aa9ed869.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../assets/css/teamStats.css">
  <title>Cartola Tips</title>
</head>
<body>
  <nav class="header navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="logo" class="navbar-brand" href="../index.html">Cartola Tips</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fa-solid fa-bars menu"></i>
      </button>
      <div class="collapse navbar-collapse menu-expandido" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a style="color: white;" class="nav-link active" aria-current="page" href="#">Grupo Vip <i class="fa-regular fa-gem"></i></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://t.me/+6lYEIgHMcTlmYTBh">Grupo Free</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Dados Brasileirao 2023
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="./teamStats.html">Estatisticas</a></li>
              <li><a class="dropdown-item" href="./tabelaBrasileirao.html">Tabela</a></li>
              <li><a class="dropdown-item" href="./predictions.html">Previsoes</a></li>
            </ul>
          </li>
        </ul>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <div class="pagina-1">
    <img class="imagem-inicial" src="../assets/imgs/bolavoando.png" alt="">
    <h1>As Melhores DICAS estao aqui!</h1>
  </div>

  <hr class="linha">

  <div class="estatisticas">
    <div style="margin-top: 0px !important;" class="container mt-5">
      <h1 style="padding: 3%; text-align: center; font-size: 70px; color: white;">Estatísticas Dos Times</h1>

      <select id="teamSelect" class="form-select" onchange="updateTeams()"></select>
      
      <div class="tabela-com-scroll">
        <table class="table table-dark table-bordered table-striped">
          <thead>
              <tr>
                  <th style="text-align: center;" scope="col" colspan="4">Time</th>
              </tr>
          </thead>

          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>
 <hr>
  <div class="produtos">
    <div class="card" style="width: 18rem;">
      <img src="../assets/imgs/grupo-vip.png" class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">Grupo Vip</h5>
        <p class="card-text">O Grupo Vip envia diariamente apostas para resultado e o mercado de gols</p>
        <a href="pagina-compra.html" class="btn btn-success">Adquira Aqui</a>
      </div>
    </div>
    <div class="card" style="width: 18rem;">
      <img src="../assets/imgs/grupo-free.png" class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">Grupo Free</h5>
        <p class="card-text">O Grupo Free contem algumas das apostas enviadas no Grupo Vip.</p>
        <a href="https://t.me/+6lYEIgHMcTlmYTBh" class="btn btn-success">Acesso</a>
      </div>
    </div>
    <div class="card" style="width: 18rem;">
      <img src="../assets/imgs/estadio.jpg" class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">Previsoes Brasileirao 2023</h5>
        <p class="card-text">Algumas previoes para o Brasileirao 2023.</p>
        <a href="./pages/predictions.html" class="btn btn-success">Clique Aqui</a>
      </div>
    </div>
  </div>

  <div class="dados-empresa">
    <p><i class="fa-regular fa-circle-check"></i> Garantia de 7 dias</p>
    <p><i class="fa-solid fa-phone"></i> Atendimento 24 horas</p>
    <p><i class="fa-regular fa-paper-plane"></i> Acesse o Grupo Vip Agora</p>
  </div>

  <div class="faq">
    <h1>Perguntas <span>Frequentes</span></h1>

    <div class="qa">
        <div class="question" onclick="toggleAnswer('q1')"><i class="fa-solid fa-caret-right"></i> Quanto custa o Grupo Vip?</div>
        <div class="answer" id="q1">O Grupo Vip custa somente R$19,90/mês</div>
    </div>

    <div class="qa">
        <div class="question" onclick="toggleAnswer('q2')"><i class="fa-solid fa-caret-right"></i> A compra é segura?</div>
        <div class="answer" id="q2">Sim, a compra é feita através do site Hotmart, o maior site da América Latina para compras online.</div>
    </div>

    <div class="qa">
        <div class="question" onclick="toggleAnswer('q3')"><i class="fa-solid fa-caret-right"></i> Quais sãos as ligas cobertas pelo Grupo Vip?</div>
        <div class="answer" id="q3">As principais Ligas da Europa, alem do Brasileirão.</div>
    </div>
  </div>



<footer>
  <h1>Billionaires Corporation</h1>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  <script>
        let dataGlobal = null;

        async function loadTeams() {
          try {
              const response = await fetch('http://localhost:3031/api/teams');
              const data = await response.json();
              //console.log(data);
              dataGlobal = data;              
              const itemSelect = document.querySelector('select');

              let optionsHTML = '';
              optionsHTML += "<option>Selecione um time</option>"; 

              for (const team of data) {
                optionsHTML += `<option value="${team.nome}">${team.nome}</option>`;
              }
              itemSelect.innerHTML = optionsHTML;

              data.forEach(team => {
                  //const listItem = document.createElement('li');
                  //listItem.textContent = `Nome: ${team.nome}, ID: ${team.id}`;
                  //teamsList.appendChild(listItem);
                  //console.log(team.id);
              });
          } catch (error) {
              console.error(error);
          }
      }
      window.addEventListener('load', loadTeams);    

      function updateTeams() {
        const itemSelectID = document.getElementById('teamSelect');
              const selectedTeam = itemSelectID.value;
              const teamData = dataGlobal[selectedTeam];
              console.log(selectedTeam);
              console.log(dataGlobal);
              for(let i=0; i < dataGlobal.length; i++) {
                if(dataGlobal[i].nome === selectedTeam) {
                  console.log(dataGlobal[i]);
                  console.log(dataGlobal[i].nome);

                  const texto = dataGlobal[i].forma;
                  const matches = texto.match(/[A-Za-z]/g);  
                  const total = matches ? matches.length : 0;
                  const vitoriasMatches = (matches || []).filter(match => match === 'W').length;
                  const derrotasMatches = (matches || []).filter(match => match === 'L').length;
                  const empatesMatches = (matches || []).filter(match => match === 'D').length;

                  const tableBody = document.querySelector('tbody');
                  tableBody.innerHTML = `
                  <tr>
                    <th style="text-align: center !important;" colspan="4"><img src=${dataGlobal[i].logo} alt=""></th>
                  </tr>
                  <tr>
                    <th colspan="4" scope="col">Jogos</th>
                  </tr>
                  <tr class="titulo-tabela">
                        <th scope="row">Vitórias</th>
                        <td colspan="4">${vitoriasMatches}</td>
        
                    </tr>
                    <tr>
                        <th scope="row">Empate</th>
                        <td colspan="4" >${empatesMatches}</td>
        
                    </tr>
                    <tr>
                        <th scope="row">Derrotas</th>
                        <td colspan="4" class="bg-warning">${derrotasMatches}</td>
        
                    </tr>
                    <tr>
                        <th scope="row">Total</th>
                        <td colspan="4">${total}</td>
        
                    </tr>
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">Casa</th>
                    <th scope="col">Fora</th>
                    <th scope="col">Total</th>
                  </tr>
                    
                    <tr>
                        <th scope="row">Maior Quantidade De Gols</th>
                        <td>${dataGlobal[i].big.wins.home}</td>
                        <td>${dataGlobal[i].big.wins.away}</td>
                        <td>${dataGlobal[i].big.streak.wins}</td>
                    </tr>
                    <tr>
                        <th scope="row">Maior Quantidade De Gols</th>
                        <td>${dataGlobal[i].big.loses.home}</td>
                        <td>${dataGlobal[i].big.loses.away}</td>
                        <td>${dataGlobal[i].big.streak.loses}</td>
                    </tr>

                    <th scope="row" colspan="4">Gols</th>
                    <tr>
                        <th scope="row">Gols A Favor</th>
                        <td>${dataGlobal[i].gols.for.total.home}</td>
                        <td>${dataGlobal[i].gols.for.total.away}</td>
                        <td>${dataGlobal[i].gols.for.total.total}</td>
                    </tr>
                    <tr>
                        <th scope="row">Gols Contra</th>
                        <td>${dataGlobal[i].gols.against.total.home}</td>
                        <td>${dataGlobal[i].gols.against.total.away}</td>
                        <td>${dataGlobal[i].gols.against.total.total}</td>
                    </tr>
                    <tr>
                        <th scope="row">Média Gols</th>
                        <td>${dataGlobal[i].gols.for.average.home}</td>
                        <td>${dataGlobal[i].gols.for.average.away}</td>
                        <td>${dataGlobal[i].gols.for.average.total}</td>
                    </tr>
                    <tr>
                        <th scope="row">Jogos Sem Sofrer Gols</th>
                        <td>${dataGlobal[i].clean.home}</td>
                        <td>${dataGlobal[i].clean.away}</td>
                        <td>${dataGlobal[i].clean.total}</td>
                    </tr>
                    <tr>
                    <th colspan="4" scope="col">Maiores Sequências</th>
                    </tr>
                    <tr>
                        <th scope="row">Maior Vitória</th>
                        <td>${dataGlobal[i].big.wins.home}</td>
                        <td>${dataGlobal[i].big.wins.away}</td>
                        <td>${dataGlobal[i].big.streak.wins}</td>
                    </tr>
                    <tr>
                        <th scope="row">Maior Derrota</th>
                        <td>${dataGlobal[i].big.loses.home}</td>
                        <td>${dataGlobal[i].big.loses.away}</td>
                        <td>${dataGlobal[i].big.streak.loses}</td>
                    </tr>
                    <tr>
                          <th colspan="4" scope="row">Vitórias</th>
                      </tr>
                    <tr>
                          <th scope="row">Maior Sequência Vitórias</th>
                          <td colspan="4" s>${dataGlobal[i].big.streak.wins}</td>
          
                      </tr>
                      <tr>
                          <th scope="row">Maior Sequência Empate</th>
                          <td colspan="4" s>${dataGlobal[i].big.streak.draws}</td>
          
                      </tr>
                      <tr>
                          <th scope="row">Maior Sequência Derrota</th>
                          <td colspan="4" s>${dataGlobal[i].big.streak.loses}</td>
          
                      </tr>
                      <tr>
                          <th scope="row">Maior Sequência Total</th>
                          <td colspan="4" s>${dataGlobal[i].big.streak.wins + dataGlobal[i].big.streak.draws + dataGlobal[i].big.streak.loses}</td>
                      </tr>
                    `;
                }
              }   
      }

      function toggleAnswer(questionId) {
        var answer = document.getElementById(questionId);
        if (answer.style.display === 'none' || answer.style.display === '') {
            answer.style.display = 'block';
        } else {
            answer.style.display = 'none';
        }
    }
  </script>
</body>
</html>